<ng-container *ngFor="let category of categoryList; let i = index">

    <div class="categoryWrapper rounded">
        <div class="categoryContent">
            <div class="categoryHeader">

                <ng-template [ngIf]="i != editCategoryIdActive" #categoryHeader>
                    <div class="categoryTitle">
                        <h2>{{ category.name }}</h2>
                    </div>
                    <div ngbDropdown class="ngbDropdown">
                        <button ngbDropdownToggle class="btn categoryMenuBtn" id="categoryOptions">
                            <i class="fa fa-cogs"></i>
                        </button>
                        <div ngbDropdownMenu aria-labelledby="categoryOptions" class="ngbDropdownToggle">
                            <button ngbDropdownItem (click)="onClickDelete(i)"><i class="fa fa-times"></i> Delete</button>
                            <button ngbDropdownItem (click)="onClickEdit(i)"><i class="fa fa-edit"></i> Edit</button>
                        </div>
                    </div>
                </ng-template>

                <ng-template [ngIf]="i == editCategoryIdActive" #newCategoryHeader>
                    <div class="input-group editCategoryInput">
                        <input #newCategoryNameField autofocus class="form-control width100 editCategoryName" 
                        value="{{ category.name }}" type="text" [(ngModel)]="tempNewCategoryName">
                        <span class="input-group-btn editCategoryButtons">
                            <button class="btn" (click)="onClickSubmitEdit(i)"><i class="fa fa-check"></i></button>
                            <button class="btn" (click)="onClickCancelEdit(i)"><i class="fa fa-times"></i></button>
                        </span>
                    </div>
                </ng-template>

            </div>
            <div class="tasksFlexWrap">
                <app-task [taskList]="category.taskList" [categoryId]="category.id"></app-task>
            </div>
            <a class="addNewTask" (click)="onClickAddNewTask(category)">
                <i class="fa fa-plus"><p>Add new task</p></i>
            </a>
        </div>
    </div>
</ng-container>

<div class="categoryWrapper newCategoryWrapper rounded">
    <app-new-category></app-new-category>
</div>
<div class="categoryWrapper newCategoryWrapper rounded">
    <app-done-list></app-done-list>
</div>